function Gt(e,t,n){for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var wt=function(){return wt=Object.assign||function(n){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},wt.apply(this,arguments)};function rt(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(d){try{o(i.next(d))}catch(f){a(f)}}function u(d){try{o(i.throw(d))}catch(f){a(f)}}function o(d){d.done?s(d.value):r(d.value).then(c,u)}o((i=i.apply(e,[])).next())})}function st(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(d){return u([o,d])}}function u(o){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(n=0)),n;)try{if(i=1,r&&(s=o[0]&2?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[o[0]&2,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,r=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1],s=o;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(o);break}s[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(d){o=[6,d],r=0}finally{i=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var Xt=function(t){return t===void 0},Yt=function(t,n,i){return t.replace(new RegExp(n,"g"),i)},Jt=function(t){return t.replace(/(<([^>]+)>)/gi,"")},Zt=function(t){try{var n=JSON.parse(t);return Array.isArray(n)?n:[]}catch{return[]}},te=function(t,n){return n===void 0&&(n=""),n+Object.keys(t).map(function(i){return"".concat(i,"=").concat(t[i])}).join("&")},ee=function(t,n){for(var i=[],r=0;r<t.length;r+=n)i.push(t.slice(r,r+n));return i},ne=["https://image.qcc.com/logo/{id}.jpg","https://image.qcc.com/auto/{id}.jpg"],ie=function(t,n){return rt(void 0,void 0,void 0,function(){var i,r,s,a;return st(this,function(c){switch(c.label){case 0:return i=t.dataset.id||"",n.avatarUrl?(r=t,[4,bt(i,[n.avatarUrl])]):[3,2];case 1:return r.src=c.sent(),[2];case 2:switch(s=n.api,s){case"qcc_open":return[3,3]}return[3,5];case 3:return a=t,[4,bt(i,ne)];case 4:return a.src=c.sent(),[3,5];case 5:return[2]}})})},bt=function(t,n){return rt(void 0,void 0,void 0,function(){var i,r,s,a,c,u;return st(this,function(o){switch(o.label){case 0:i=0,r=n,o.label=1;case 1:if(!(i<r.length))return[3,8];s=r[i],o.label=2;case 2:return o.trys.push([2,6,,7]),a=Yt(s,"{id}",t),[4,fetch(a)];case 3:return c=o.sent(),c.status!==200?[3,5]:[4,c.blob()];case 4:return u=o.sent(),[2,URL.createObjectURL(u)];case 5:return[3,7];case 6:return o.sent(),[3,7];case 7:return i++,[3,1];case 8:return[2,""]}})})},it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zt={exports:{}};function re(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mt={exports:{}},At;function se(){return At||(At=1,function(e,t){(function(n,i){e.exports=i()})(it,function(){var n=n||function(i,r){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof it<"u"&&it.crypto&&(s=it.crypto),!s&&typeof re=="function")try{s=require("crypto")}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function y(){}return function(l){var h;return y.prototype=l,h=new y,y.prototype=null,h}}(),u={},o=u.lib={},d=o.Base=function(){return{extend:function(l){var h=c(this);return l&&h.mixIn(l),(!h.hasOwnProperty("init")||this.init===h.init)&&(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var l=this.extend();return l.init.apply(l,arguments),l},init:function(){},mixIn:function(l){for(var h in l)l.hasOwnProperty(h)&&(this[h]=l[h]);l.hasOwnProperty("toString")&&(this.toString=l.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=o.WordArray=d.extend({init:function(l,h){l=this.words=l||[],h!=r?this.sigBytes=h:this.sigBytes=l.length*4},toString:function(l){return(l||S).stringify(this)},concat:function(l){var h=this.words,w=l.words,E=this.sigBytes,L=l.sigBytes;if(this.clamp(),E%4)for(var k=0;k<L;k++){var R=w[k>>>2]>>>24-k%4*8&255;h[E+k>>>2]|=R<<24-(E+k)%4*8}else for(var B=0;B<L;B+=4)h[E+B>>>2]=w[B>>>2];return this.sigBytes+=L,this},clamp:function(){var l=this.words,h=this.sigBytes;l[h>>>2]&=4294967295<<32-h%4*8,l.length=i.ceil(h/4)},clone:function(){var l=d.clone.call(this);return l.words=this.words.slice(0),l},random:function(l){for(var h=[],w=0;w<l;w+=4)h.push(a());return new f.init(h,l)}}),_=u.enc={},S=_.Hex={stringify:function(l){for(var h=l.words,w=l.sigBytes,E=[],L=0;L<w;L++){var k=h[L>>>2]>>>24-L%4*8&255;E.push((k>>>4).toString(16)),E.push((k&15).toString(16))}return E.join("")},parse:function(l){for(var h=l.length,w=[],E=0;E<h;E+=2)w[E>>>3]|=parseInt(l.substr(E,2),16)<<24-E%8*4;return new f.init(w,h/2)}},C=_.Latin1={stringify:function(l){for(var h=l.words,w=l.sigBytes,E=[],L=0;L<w;L++){var k=h[L>>>2]>>>24-L%4*8&255;E.push(String.fromCharCode(k))}return E.join("")},parse:function(l){for(var h=l.length,w=[],E=0;E<h;E++)w[E>>>2]|=(l.charCodeAt(E)&255)<<24-E%4*8;return new f.init(w,h)}},A=_.Utf8={stringify:function(l){try{return decodeURIComponent(escape(C.stringify(l)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(l){return C.parse(unescape(encodeURIComponent(l)))}},b=o.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(l){typeof l=="string"&&(l=A.parse(l)),this._data.concat(l),this._nDataBytes+=l.sigBytes},_process:function(l){var h,w=this._data,E=w.words,L=w.sigBytes,k=this.blockSize,R=k*4,B=L/R;l?B=i.ceil(B):B=i.max((B|0)-this._minBufferSize,0);var T=B*k,q=i.min(T*4,L);if(T){for(var F=0;F<T;F+=k)this._doProcessBlock(E,F);h=E.splice(0,T),w.sigBytes-=q}return new f.init(h,q)},clone:function(){var l=d.clone.call(this);return l._data=this._data.clone(),l},_minBufferSize:0});o.Hasher=b.extend({cfg:d.extend(),init:function(l){this.cfg=this.cfg.extend(l),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(l){return this._append(l),this._process(),this},finalize:function(l){l&&this._append(l);var h=this._doFinalize();return h},blockSize:16,_createHelper:function(l){return function(h,w){return new l.init(w).finalize(h)}},_createHmacHelper:function(l){return function(h,w){return new x.HMAC.init(l,w).finalize(h)}}});var x=u.algo={};return u}(Math);return n})}(mt)),mt.exports}(function(e,t){(function(n,i){e.exports=i(se())})(it,function(n){return function(i){var r=n,s=r.lib,a=s.WordArray,c=s.Hasher,u=r.algo,o=[];(function(){for(var A=0;A<64;A++)o[A]=i.abs(i.sin(A+1))*4294967296|0})();var d=u.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(b,x){for(var y=0;y<16;y++){var l=x+y,h=b[l];b[l]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360}var w=this._hash.words,E=b[x+0],L=b[x+1],k=b[x+2],R=b[x+3],B=b[x+4],T=b[x+5],q=b[x+6],F=b[x+7],z=b[x+8],$=b[x+9],P=b[x+10],I=b[x+11],H=b[x+12],D=b[x+13],Y=b[x+14],lt=b[x+15],p=w[0],g=w[1],v=w[2],m=w[3];p=f(p,g,v,m,E,7,o[0]),m=f(m,p,g,v,L,12,o[1]),v=f(v,m,p,g,k,17,o[2]),g=f(g,v,m,p,R,22,o[3]),p=f(p,g,v,m,B,7,o[4]),m=f(m,p,g,v,T,12,o[5]),v=f(v,m,p,g,q,17,o[6]),g=f(g,v,m,p,F,22,o[7]),p=f(p,g,v,m,z,7,o[8]),m=f(m,p,g,v,$,12,o[9]),v=f(v,m,p,g,P,17,o[10]),g=f(g,v,m,p,I,22,o[11]),p=f(p,g,v,m,H,7,o[12]),m=f(m,p,g,v,D,12,o[13]),v=f(v,m,p,g,Y,17,o[14]),g=f(g,v,m,p,lt,22,o[15]),p=_(p,g,v,m,L,5,o[16]),m=_(m,p,g,v,q,9,o[17]),v=_(v,m,p,g,I,14,o[18]),g=_(g,v,m,p,E,20,o[19]),p=_(p,g,v,m,T,5,o[20]),m=_(m,p,g,v,P,9,o[21]),v=_(v,m,p,g,lt,14,o[22]),g=_(g,v,m,p,B,20,o[23]),p=_(p,g,v,m,$,5,o[24]),m=_(m,p,g,v,Y,9,o[25]),v=_(v,m,p,g,R,14,o[26]),g=_(g,v,m,p,z,20,o[27]),p=_(p,g,v,m,D,5,o[28]),m=_(m,p,g,v,k,9,o[29]),v=_(v,m,p,g,F,14,o[30]),g=_(g,v,m,p,H,20,o[31]),p=S(p,g,v,m,T,4,o[32]),m=S(m,p,g,v,z,11,o[33]),v=S(v,m,p,g,I,16,o[34]),g=S(g,v,m,p,Y,23,o[35]),p=S(p,g,v,m,L,4,o[36]),m=S(m,p,g,v,B,11,o[37]),v=S(v,m,p,g,F,16,o[38]),g=S(g,v,m,p,P,23,o[39]),p=S(p,g,v,m,D,4,o[40]),m=S(m,p,g,v,E,11,o[41]),v=S(v,m,p,g,R,16,o[42]),g=S(g,v,m,p,q,23,o[43]),p=S(p,g,v,m,$,4,o[44]),m=S(m,p,g,v,H,11,o[45]),v=S(v,m,p,g,lt,16,o[46]),g=S(g,v,m,p,k,23,o[47]),p=C(p,g,v,m,E,6,o[48]),m=C(m,p,g,v,F,10,o[49]),v=C(v,m,p,g,Y,15,o[50]),g=C(g,v,m,p,T,21,o[51]),p=C(p,g,v,m,H,6,o[52]),m=C(m,p,g,v,R,10,o[53]),v=C(v,m,p,g,P,15,o[54]),g=C(g,v,m,p,L,21,o[55]),p=C(p,g,v,m,z,6,o[56]),m=C(m,p,g,v,lt,10,o[57]),v=C(v,m,p,g,q,15,o[58]),g=C(g,v,m,p,D,21,o[59]),p=C(p,g,v,m,B,6,o[60]),m=C(m,p,g,v,I,10,o[61]),v=C(v,m,p,g,k,15,o[62]),g=C(g,v,m,p,$,21,o[63]),w[0]=w[0]+p|0,w[1]=w[1]+g|0,w[2]=w[2]+v|0,w[3]=w[3]+m|0},_doFinalize:function(){var b=this._data,x=b.words,y=this._nDataBytes*8,l=b.sigBytes*8;x[l>>>5]|=128<<24-l%32;var h=i.floor(y/4294967296),w=y;x[(l+64>>>9<<4)+15]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,x[(l+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,b.sigBytes=(x.length+1)*4,this._process();for(var E=this._hash,L=E.words,k=0;k<4;k++){var R=L[k];L[k]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}return E},clone:function(){var b=c.clone.call(this);return b._hash=this._hash.clone(),b}});function f(A,b,x,y,l,h,w){var E=A+(b&x|~b&y)+l+w;return(E<<h|E>>>32-h)+b}function _(A,b,x,y,l,h,w){var E=A+(b&y|x&~y)+l+w;return(E<<h|E>>>32-h)+b}function S(A,b,x,y,l,h,w){var E=A+(b^x^y)+l+w;return(E<<h|E>>>32-h)+b}function C(A,b,x,y,l,h,w){var E=A+(x^(b|~y))+l+w;return(E<<h|E>>>32-h)+b}r.MD5=c._createHelper(d),r.HmacMD5=c._createHmacHelper(d)}(Math),n.MD5})})(zt);var ae=zt.exports,ce=oe(ae),Wt=["9y16cxzg","sr2z1z63","hk2ssit3","acsevi4u","nu38i9ej","6m70kgre","hl8rvmhu","30uzkxp0","v9jggair","4ryav515","pgx6isvq","6b3zumy7","bxureygp","jff4xbhb","7j56lyfw","2tctuvza","8jfrswdr","r2as467y","jzye6ls1","bpi7fhat","ywp0p3qn","rzybga6p","84u199q5","kktjaqis","amn5oud8","a0zs4b52","x16y3u37","xku2lp9m","n8eawc7q","gw68xkfw","4wxtunev","ew2x6rzg","go9f3t54","7d0fkx5i","ai6ol58k","47jsslmm","70mxfzcz","b90wzl0c","ua78bvmr","7p60hdt4","ge5lw4u8","ref3rey2","wgay7vhx","b8l2u4mj","rk80y5ot","o37o4wq3","0moweoh0","r10m9bpy","wjilkjhj","il27pnod"],le=ee(Wt,5),ue="v2.0",Ft=31,fe=function(){return ue},kt=function(t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.from({length:t},function(){return n.charAt(Math.floor(Math.random()*n.length))}).join("")},de=function(t){var n=pe(t)%Wt.length,i=Math.floor(n/5);return le[i][n%5]},he=function(t){return ce(t).toString()},pe=function(t){var n=Ft+(t===null?0:ge(t))|0;return Math.abs(n)},ge=function(t){for(var n=1,i=0;i<t.length;i++)n=Ft*n+t.charCodeAt(i)|0;return n},ve=function(t){var n={f:kt(5),g:kt(3),r:"/company/getCompanyName",searchKey:t,t:Math.floor(Date.now()/1e3),v:fe()},i=te(n),r=de(n.r.toUpperCase()+i),s=he("GET".concat(i).concat(r));return"https://c.qcc.com/embed/api".concat(n.r,"?").concat(i,"&m=").concat(s)},me=function(t,n){return rt(void 0,void 0,void 0,function(){var i,r,s,a;return st(this,function(c){switch(c.label){case 0:if(t.length<2||t.length>100)throw new Error(" keyword length must be between 2 and 100");return i=ve(t),[4,fetch(i,wt({method:"GET",mode:"cors",headers:{Referer:"https://c.qcc.com/"}},Xt(n)?null:{signal:n==null?void 0:n.signal}))];case 1:return r=c.sent(),[4,r.json()];case 2:return s=c.sent(),a=[],s.status!=="200"?[2,a]:[2,s.result.map(function(u){var o=u.keyNo||Jt(u.companyName);return{name:u.companyName,id:o}})]}})})},ye=function(t,n){return rt(void 0,void 0,void 0,function(){var i,r,s;return st(this,function(a){switch(a.label){case 0:if(t.length<2||t.length>=100)throw new Error("keyword length must be between 2 and 100");return i="https://autocomplete.clearbit.com/v1/companies/suggest?query=".concat(t),[4,fetch(i,{method:"GET",mode:"cors",signal:n==null?void 0:n.signal})];case 1:return r=a.sent(),[4,r.json()];case 2:return s=a.sent(),[2,s.map(function(c){return{name:c.name,id:c.domain,avatar:c.logo}})]}})})},we=function(t,n,i){return rt(void 0,void 0,void 0,function(){var r,s;return st(this,function(a){switch(a.label){case 0:switch(s=n,s){case"qcc_open":return[3,1];case"clearbit":return[3,3]}return[3,5];case 1:return[4,me(t,i)];case 2:return r=a.sent(),[3,6];case 3:return[4,ye(t,i)];case 4:return r=a.sent(),[3,6];case 5:return r=[],[3,6];case 6:return[2,{data:r}]}})})},be=function(t,n){if(!(!n.enabled||!n.key)){var i=n.type==="localStorage"?localStorage:sessionStorage,r=It(n),s=r.findIndex(function(a){return a.id===t.id});s>-1&&r.splice(s,1),r.splice(0,0,t),i.setItem(n.key,JSON.stringify(r.length>5?r.slice(0,5):r))}},It=function(t){if(!t.enabled||!t.key)return[];var n=t.type==="localStorage"?localStorage:sessionStorage,i=n.getItem(t.key)||"";return Zt(i)},xe=function(t){var n=t.type==="localStorage"?localStorage:sessionStorage;n.removeItem(t.key)},_e={target:"body",api:"clearbit",queryDelay:500,placeholder:"Input company name",clearable:!0,backFill:!1,popupAppendToBody:!0,clearIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59L15.59 7L17 8.41L13.41 12L17 15.59z"/></svg>',autoFocus:!0,history:{enabled:!0,type:"localStorage",key:"company-history",showClear:!0,itemIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="m15.1 19.37l1 1.74c-.96.44-2.01.73-3.1.84v-2.02c.74-.09 1.44-.28 2.1-.56zM4.07 13H2.05c.11 1.1.4 2.14.84 3.1l1.74-1c-.28-.66-.47-1.36-.56-2.1zM15.1 4.63l1-1.74c-.96-.44-2-.73-3.1-.84v2.02c.74.09 1.44.28 2.1.56zM19.93 11h2.02c-.11-1.1-.4-2.14-.84-3.1l-1.74 1c.28.66.47 1.36.56 2.1zM8.9 19.37l-1 1.74c.96.44 2.01.73 3.1.84v-2.02c-.74-.09-1.44-.28-2.1-.56zM11 4.07V2.05c-1.1.11-2.14.4-3.1.84l1 1.74c.66-.28 1.36-.47 2.1-.56zm7.36 3.1l1.74-1.01c-.63-.87-1.4-1.64-2.27-2.27l-1.01 1.74c.59.45 1.1.96 1.54 1.54zM4.63 8.9l-1.74-1c-.44.96-.73 2-.84 3.1h2.02c.09-.74.28-1.44.56-2.1zm15.3 4.1c-.09.74-.28 1.44-.56 2.1l1.74 1c.44-.96.73-2.01.84-3.1h-2.02zm-3.1 5.36l1.01 1.74c.87-.63 1.64-1.4 2.27-2.27l-1.74-1.01c-.45.59-.96 1.1-1.54 1.54zM7.17 5.64l-1-1.75c-.88.64-1.64 1.4-2.27 2.28l1.74 1.01a7.7 7.7 0 0 1 1.53-1.54zM5.64 16.83l-1.74 1c.63.87 1.4 1.64 2.27 2.27l1.01-1.74a7.7 7.7 0 0 1-1.54-1.53zM13 7h-2v5.41l4.29 4.29l1.41-1.41l-3.7-3.7V7z"/></svg>',clearIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M15 2h-3.5l-1-1h-5l-1 1H1v2h14zm1 7c-.7 0-1.37.1-2 .29V5H2v12c0 1.1.9 2 2 2h5.68A6.999 6.999 0 0 0 23 16c0-3.87-3.13-7-7-7zm-7 7c0 .34.03.67.08 1H4V7h8v3.26c-1.81 1.27-3 3.36-3 5.74zm7 5c-2.76 0-5-2.24-5-5s2.24-5 5-5s5 2.24 5 5s-2.24 5-5 5z"/><path fill="currentColor" d="M16.5 12H15v5l3.6 2.1l.8-1.2l-2.9-1.7z"/></svg>'},onInput:function(){},onChange:function(){},onFetch:function(){},onAbortFetch:function(){},onSelect:function(){},onClear:function(){},onFocus:function(){},onBlur:function(){},onSubmit:function(){},onDropdownVisibleChange:function(){},showSubmitButton:!0,submitButtonLabel:"Submit",offsetTop:5,autoFlip:!1},J=Object.freeze({__proto__:null,addHistory:be,getHistory:It,getImageData:bt,handleAvatar:ie,handleQueryData:we,initialOptions:_e,removeHistory:xe}),Se=function(t,n){var i=!1;document.addEventListener("click",function(r){!t.contains(r.target)&&!i&&n(),i=t.contains(r.target)},!0)},Lt=function(t){return typeof t=="function"},Ee=function(t){return typeof t=="string"};function Ce(e,t,n){t===void 0&&(t=0);var i=n===void 0?{}:n,r=i.start,s=r===void 0?!0:r,a=i.middle,c=a===void 0?!0:a,u=i.once,o=u===void 0?!1:u,d=s,f=0,_,S=!1;function C(){for(var A=this,b=[],x=0;x<arguments.length;x++)b[x]=arguments[x];if(!S){var y=Date.now()-f;f=Date.now(),s&&c&&y>=t&&(d=!0),d?(d=!1,e.apply(this,b),o&&C.cancel()):(c&&y<t||!c)&&(clearTimeout(_),_=setTimeout(function(){f=Date.now(),e.apply(A,b),o&&C.cancel()},c?t-y:t))}}return C.cancel=function(){clearTimeout(_),S=!0},C}function Ae(e,t,n){t===void 0&&(t=0);var i={},r=i.start,s=r===void 0?!1:r,a=i.middle,c=a===void 0?!1:a,u=i.once,o=u===void 0?!1:u;return Ce(e,t,{start:s,middle:c,once:o})}var Bt=function(t){return t.replace(/(<([^>]+)>)/gi,"")};const K=Math.min,W=Math.max,ft=Math.round,ut=Math.floor,U=e=>({x:e,y:e}),ke={left:"right",right:"left",bottom:"top",top:"bottom"},Le={start:"end",end:"start"};function pt(e,t){return typeof e=="function"?e(t):e}function G(e){return e.split("-")[0]}function at(e){return e.split("-")[1]}function Be(e){return e==="x"?"y":"x"}function jt(e){return e==="y"?"height":"width"}function tt(e){return["top","bottom"].includes(G(e))?"y":"x"}function Mt(e){return Be(tt(e))}function Re(e,t,n){n===void 0&&(n=!1);const i=at(e),r=Mt(e),s=jt(r);let a=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=dt(a)),[a,dt(a)]}function Te(e){const t=dt(e);return[xt(e),t,xt(t)]}function xt(e){return e.replace(/start|end/g,t=>Le[t])}function He(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:a;default:return[]}}function De(e,t,n,i){const r=at(e);let s=He(G(e),n==="start",i);return r&&(s=s.map(a=>a+"-"+r),t&&(s=s.concat(s.map(xt)))),s}function dt(e){return e.replace(/left|right|bottom|top/g,t=>ke[t])}function Oe(e){return{top:0,right:0,bottom:0,left:0,...e}}function ze(e){return typeof e!="number"?Oe(e):{top:e,right:e,bottom:e,left:e}}function ht(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function Rt(e,t,n){let{reference:i,floating:r}=e;const s=tt(t),a=Mt(t),c=jt(a),u=G(t),o=s==="y",d=i.x+i.width/2-r.width/2,f=i.y+i.height/2-r.height/2,_=i[c]/2-r[c]/2;let S;switch(u){case"top":S={x:d,y:i.y-r.height};break;case"bottom":S={x:d,y:i.y+i.height};break;case"right":S={x:i.x+i.width,y:f};break;case"left":S={x:i.x-r.width,y:f};break;default:S={x:i.x,y:i.y}}switch(at(t)){case"start":S[a]-=_*(n&&o?-1:1);break;case"end":S[a]+=_*(n&&o?-1:1);break}return S}const We=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=n,c=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(t));let o=await a.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:f}=Rt(o,i,u),_=i,S={},C=0;for(let A=0;A<c.length;A++){const{name:b,fn:x}=c[A],{x:y,y:l,data:h,reset:w}=await x({x:d,y:f,initialPlacement:i,placement:_,strategy:r,middlewareData:S,rects:o,platform:a,elements:{reference:e,floating:t}});d=y??d,f=l??f,S={...S,[b]:{...S[b],...h}},w&&C<=50&&(C++,typeof w=="object"&&(w.placement&&(_=w.placement),w.rects&&(o=w.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:r}):w.rects),{x:d,y:f}=Rt(o,_,u)),A=-1)}return{x:d,y:f,placement:_,strategy:r,middlewareData:S}};async function qt(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:a,elements:c,strategy:u}=e,{boundary:o="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:_=!1,padding:S=0}=pt(t,e),C=ze(S),b=c[_?f==="floating"?"reference":"floating":f],x=ht(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:o,rootBoundary:d,strategy:u})),y=f==="floating"?{x:i,y:r,width:a.floating.width,height:a.floating.height}:a.reference,l=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),h=await(s.isElement==null?void 0:s.isElement(l))?await(s.getScale==null?void 0:s.getScale(l))||{x:1,y:1}:{x:1,y:1},w=ht(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:l,strategy:u}):y);return{top:(x.top-w.top+C.top)/h.y,bottom:(w.bottom-x.bottom+C.bottom)/h.y,left:(x.left-w.left+C.left)/h.x,right:(w.right-x.right+C.right)/h.x}}const Fe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:s,rects:a,initialPlacement:c,platform:u,elements:o}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:_,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:A=!0,...b}=pt(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=G(r),y=tt(c),l=G(c)===c,h=await(u.isRTL==null?void 0:u.isRTL(o.floating)),w=_||(l||!A?[dt(c)]:Te(c)),E=C!=="none";!_&&E&&w.push(...De(c,A,C,h));const L=[c,...w],k=await qt(t,b),R=[];let B=((i=s.flip)==null?void 0:i.overflows)||[];if(d&&R.push(k[x]),f){const z=Re(r,a,h);R.push(k[z[0]],k[z[1]])}if(B=[...B,{placement:r,overflows:R}],!R.every(z=>z<=0)){var T,q;const z=(((T=s.flip)==null?void 0:T.index)||0)+1,$=L[z];if($)return{data:{index:z,overflows:B},reset:{placement:$}};let P=(q=B.filter(I=>I.overflows[0]<=0).sort((I,H)=>I.overflows[1]-H.overflows[1])[0])==null?void 0:q.placement;if(!P)switch(S){case"bestFit":{var F;const I=(F=B.filter(H=>{if(E){const D=tt(H.placement);return D===y||D==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(D=>D>0).reduce((D,Y)=>D+Y,0)]).sort((H,D)=>H[1]-D[1])[0])==null?void 0:F[0];I&&(P=I);break}case"initialPlacement":P=c;break}if(r!==P)return{reset:{placement:P}}}return{}}}};async function Ie(e,t){const{placement:n,platform:i,elements:r}=e,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),a=G(n),c=at(n),u=tt(n)==="y",o=["left","top"].includes(a)?-1:1,d=s&&u?-1:1,f=pt(t,e);let{mainAxis:_,crossAxis:S,alignmentAxis:C}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return c&&typeof C=="number"&&(S=c==="end"?C*-1:C),u?{x:S*d,y:_*o}:{x:_*o,y:S*d}}const je=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:s,placement:a,middlewareData:c}=t,u=await Ie(t,e);return a===((n=c.offset)==null?void 0:n.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:r+u.x,y:s+u.y,data:{...u,placement:a}}}}},Me=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:i,platform:r,elements:s}=t,{apply:a=()=>{},...c}=pt(e,t),u=await qt(t,c),o=G(n),d=at(n),f=tt(n)==="y",{width:_,height:S}=i.floating;let C,A;o==="top"||o==="bottom"?(C=o,A=d===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(A=o,C=d==="end"?"top":"bottom");const b=S-u.top-u.bottom,x=_-u.left-u.right,y=K(S-u[C],b),l=K(_-u[A],x),h=!t.middlewareData.shift;let w=y,E=l;if(f?E=d||h?K(l,x):x:w=d||h?K(y,b):b,h&&!d){const k=W(u.left,0),R=W(u.right,0),B=W(u.top,0),T=W(u.bottom,0);f?E=_-2*(k!==0||R!==0?k+R:W(u.left,u.right)):w=S-2*(B!==0||T!==0?B+T:W(u.top,u.bottom))}await a({...t,availableWidth:E,availableHeight:w});const L=await r.getDimensions(s.floating);return _!==L.width||S!==L.height?{reset:{rects:!0}}:{}}}};function nt(e){return Pt(e)?(e.nodeName||"").toLowerCase():"#document"}function O(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function V(e){var t;return(t=(Pt(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Pt(e){return e instanceof Node||e instanceof O(e).Node}function j(e){return e instanceof Element||e instanceof O(e).Element}function N(e){return e instanceof HTMLElement||e instanceof O(e).HTMLElement}function Tt(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof O(e).ShadowRoot}function ct(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=M(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function qe(e){return["table","td","th"].includes(nt(e))}function gt(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function St(e){const t=Et(),n=j(e)?M(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Pe(e){let t=Q(e);for(;N(t)&&!et(t);){if(St(t))return t;if(gt(t))return null;t=Q(t)}return null}function Et(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function et(e){return["html","body","#document"].includes(nt(e))}function M(e){return O(e).getComputedStyle(e)}function vt(e){return j(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Q(e){if(nt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Tt(e)&&e.host||V(e);return Tt(t)?t.host:t}function Nt(e){const t=Q(e);return et(t)?e.ownerDocument?e.ownerDocument.body:e.body:N(t)&&ct(t)?t:Nt(t)}function ot(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=Nt(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),a=O(r);if(s){const c=_t(a);return t.concat(a,a.visualViewport||[],ct(r)?r:[],c&&n?ot(c):[])}return t.concat(r,ot(r,[],n))}function _t(e){return Object.getPrototypeOf(e.parent)?e.frameElement:null}function Vt(e){const t=M(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=N(e),s=r?e.offsetWidth:n,a=r?e.offsetHeight:i,c=ft(n)!==s||ft(i)!==a;return c&&(n=s,i=a),{width:n,height:i,$:c}}function Ct(e){return j(e)?e:e.contextElement}function Z(e){const t=Ct(e);if(!N(t))return U(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=Vt(t);let a=(s?ft(n.width):n.width)/i,c=(s?ft(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const Ne=U(0);function Ut(e){const t=O(e);return!Et()||!t.visualViewport?Ne:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ve(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==O(e)?!1:t}function X(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=Ct(e);let a=U(1);t&&(i?j(i)&&(a=Z(i)):a=Z(e));const c=Ve(s,n,i)?Ut(s):U(0);let u=(r.left+c.x)/a.x,o=(r.top+c.y)/a.y,d=r.width/a.x,f=r.height/a.y;if(s){const _=O(s),S=i&&j(i)?O(i):i;let C=_,A=_t(C);for(;A&&i&&S!==C;){const b=Z(A),x=A.getBoundingClientRect(),y=M(A),l=x.left+(A.clientLeft+parseFloat(y.paddingLeft))*b.x,h=x.top+(A.clientTop+parseFloat(y.paddingTop))*b.y;u*=b.x,o*=b.y,d*=b.x,f*=b.y,u+=l,o+=h,C=O(A),A=_t(C)}}return ht({width:d,height:f,x:u,y:o})}function Ue(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s=r==="fixed",a=V(i),c=t?gt(t.floating):!1;if(i===a||c&&s)return n;let u={scrollLeft:0,scrollTop:0},o=U(1);const d=U(0),f=N(i);if((f||!f&&!s)&&((nt(i)!=="body"||ct(a))&&(u=vt(i)),N(i))){const _=X(i);o=Z(i),d.x=_.x+i.clientLeft,d.y=_.y+i.clientTop}return{width:n.width*o.x,height:n.height*o.y,x:n.x*o.x-u.scrollLeft*o.x+d.x,y:n.y*o.y-u.scrollTop*o.y+d.y}}function Qe(e){return Array.from(e.getClientRects())}function Qt(e){return X(V(e)).left+vt(e).scrollLeft}function $e(e){const t=V(e),n=vt(e),i=e.ownerDocument.body,r=W(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=W(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let a=-n.scrollLeft+Qt(e);const c=-n.scrollTop;return M(i).direction==="rtl"&&(a+=W(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:a,y:c}}function Ke(e,t){const n=O(e),i=V(e),r=n.visualViewport;let s=i.clientWidth,a=i.clientHeight,c=0,u=0;if(r){s=r.width,a=r.height;const o=Et();(!o||o&&t==="fixed")&&(c=r.offsetLeft,u=r.offsetTop)}return{width:s,height:a,x:c,y:u}}function Ge(e,t){const n=X(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=N(e)?Z(e):U(1),a=e.clientWidth*s.x,c=e.clientHeight*s.y,u=r*s.x,o=i*s.y;return{width:a,height:c,x:u,y:o}}function Ht(e,t,n){let i;if(t==="viewport")i=Ke(e,n);else if(t==="document")i=$e(V(e));else if(j(t))i=Ge(t,n);else{const r=Ut(e);i={...t,x:t.x-r.x,y:t.y-r.y}}return ht(i)}function $t(e,t){const n=Q(e);return n===t||!j(n)||et(n)?!1:M(n).position==="fixed"||$t(n,t)}function Xe(e,t){const n=t.get(e);if(n)return n;let i=ot(e,[],!1).filter(c=>j(c)&&nt(c)!=="body"),r=null;const s=M(e).position==="fixed";let a=s?Q(e):e;for(;j(a)&&!et(a);){const c=M(a),u=St(a);!u&&c.position==="fixed"&&(r=null),(s?!u&&!r:!u&&c.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ct(a)&&!u&&$t(e,a))?i=i.filter(d=>d!==a):r=c,a=Q(a)}return t.set(e,i),i}function Ye(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const a=[...n==="clippingAncestors"?gt(t)?[]:Xe(t,this._c):[].concat(n),i],c=a[0],u=a.reduce((o,d)=>{const f=Ht(t,d,r);return o.top=W(f.top,o.top),o.right=K(f.right,o.right),o.bottom=K(f.bottom,o.bottom),o.left=W(f.left,o.left),o},Ht(t,c,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Je(e){const{width:t,height:n}=Vt(e);return{width:t,height:n}}function Ze(e,t,n){const i=N(t),r=V(t),s=n==="fixed",a=X(e,!0,s,t);let c={scrollLeft:0,scrollTop:0};const u=U(0);if(i||!i&&!s)if((nt(t)!=="body"||ct(r))&&(c=vt(t)),i){const f=X(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else r&&(u.x=Qt(r));const o=a.left+c.scrollLeft-u.x,d=a.top+c.scrollTop-u.y;return{x:o,y:d,width:a.width,height:a.height}}function yt(e){return M(e).position==="static"}function Dt(e,t){return!N(e)||M(e).position==="fixed"?null:t?t(e):e.offsetParent}function Kt(e,t){const n=O(e);if(gt(e))return n;if(!N(e)){let r=Q(e);for(;r&&!et(r);){if(j(r)&&!yt(r))return r;r=Q(r)}return n}let i=Dt(e,t);for(;i&&qe(i)&&yt(i);)i=Dt(i,t);return i&&et(i)&&yt(i)&&!St(i)?n:i||Pe(e)||n}const tn=async function(e){const t=this.getOffsetParent||Kt,n=this.getDimensions,i=await n(e.floating);return{reference:Ze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function en(e){return M(e).direction==="rtl"}const nn={convertOffsetParentRelativeRectToViewportRelativeRect:Ue,getDocumentElement:V,getClippingRect:Ye,getOffsetParent:Kt,getElementRects:tn,getClientRects:Qe,getDimensions:Je,getScale:Z,isElement:j,isRTL:en};function on(e,t){let n=null,i;const r=V(e);function s(){var c;clearTimeout(i),(c=n)==null||c.disconnect(),n=null}function a(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),s();const{left:o,top:d,width:f,height:_}=e.getBoundingClientRect();if(c||t(),!f||!_)return;const S=ut(d),C=ut(r.clientWidth-(o+f)),A=ut(r.clientHeight-(d+_)),b=ut(o),y={rootMargin:-S+"px "+-C+"px "+-A+"px "+-b+"px",threshold:W(0,K(1,u))||1};let l=!0;function h(w){const E=w[0].intersectionRatio;if(E!==u){if(!l)return a();E?a(!1,E):i=setTimeout(()=>{a(!1,1e-7)},1e3)}l=!1}try{n=new IntersectionObserver(h,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(h,y)}n.observe(e)}return a(!0),s}function rn(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=i,o=Ct(e),d=r||s?[...o?ot(o):[],...ot(t)]:[];d.forEach(x=>{r&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const f=o&&c?on(o,n):null;let _=-1,S=null;a&&(S=new ResizeObserver(x=>{let[y]=x;y&&y.target===o&&S&&(S.unobserve(t),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var l;(l=S)==null||l.observe(t)})),n()}),o&&!u&&S.observe(o),S.observe(t));let C,A=u?X(e):null;u&&b();function b(){const x=X(e);A&&(x.x!==A.x||x.y!==A.y||x.width!==A.width||x.height!==A.height)&&n(),A=x,C=requestAnimationFrame(b)}return n(),()=>{var x;d.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f==null||f(),(x=S)==null||x.disconnect(),S=null,u&&cancelAnimationFrame(C)}}const sn=je,an=Fe,cn=Me,ln=(e,t,n)=>{const i=new Map,r={platform:nn,...n},s={...r.platform,_c:i};return We(e,t,{...r,platform:s})};var Ot=function(e,t,n){e.forEach(function(i){i.classList.remove(n)}),e[t].classList.add(n)},un=function(){function e(t){t===void 0&&(t={}),this.suggestions=[],this.suggestionElement=document.createElement("div"),this.suggestionActivatedClassName="suggestion-popper--activated",this.inputWrapElement=document.createElement("div"),this.inputWrapHaveWordsClassName="company-autocomplete--words",this.inputWrapActivatedClassName="company-autocomplete--activated",this.latestKeyword="",this.options=Object.assign({},J.initialOptions,t),Ee(this.options.target)?this.target=document.querySelector(this.options.target):this.target=this.options.target,this.render()}return e.prototype.render=function(){var t=this,n,i,r,s,a,c;if(this.target){var u=['<div class="company-autocomplete '.concat(this.options.showSubmitButton?"company-autocomplete--show-submit":"",'">'),'<div class="company-autocomplete__input">','<input type="text" placeholder="'.concat(this.options.placeholder,'" />'),this.options.clearable?'<div class="company-autocomplete__clear"><i class="company-autocomplete__clear-icon">'.concat(this.options.clearIcon,"</i></div>"):"","</div>",this.options.showSubmitButton?'<div class="company-autocomplete__submit">':"",this.options.showSubmitButton?'<button type="button">'.concat(this.options.submitButtonLabel,"</button>"):"",this.options.showSubmitButton?"</div>":"","</div>"];this.target.innerHTML=u.join(""),this.suggestionElement.classList.add("suggestion-popper"),this.clearSuggestion(),this.options.popupAppendToBody?document.body.appendChild(this.suggestionElement):this.target.appendChild(this.suggestionElement),this.inputWrapElement=this.target.querySelector(".company-autocomplete"),this.inputElement=this.inputWrapElement.querySelector("input");var o=this.inputWrapElement.querySelector("button");rn(this.inputWrapElement,this.suggestionElement,function(){ln(t.inputWrapElement,t.suggestionElement,{middleware:Gt([sn(t.options.offsetTop),cn({apply:function(d){var f=d.rects;Object.assign(t.suggestionElement.style,{width:"".concat(f.reference.width,"px")})}})],t.options.autoFlip?[an({fallbackPlacements:["top"]})]:[])}).then(function(d){var f=d.x,_=d.y;Object.assign(t.suggestionElement.style,{left:"".concat(f,"px"),top:"".concat(_,"px")})})}),(n=this.inputElement)===null||n===void 0||n.addEventListener("input",function(){var d,f;t.keyboardActiveIndex=void 0,t.selectCompany=void 0;var _=((d=t.inputElement)===null||d===void 0?void 0:d.value)||"";t.inputWrapElement.classList[_.length>0?"add":"remove"](t.inputWrapHaveWordsClassName),_.length===0&&(t.clearSuggestion(),t.hideSuggestion()),(f=t.options)===null||f===void 0||f.onInput(_)}),(i=this.inputElement)===null||i===void 0||i.addEventListener("input",Ae(function(){var d,f=((d=t.inputElement)===null||d===void 0?void 0:d.value)||"";f&&t.handleQuerySuggestion(f)},this.options.queryDelay)),(r=this.inputElement)===null||r===void 0||r.addEventListener("change",function(d){var f,_=d.target.value;(f=t.options)===null||f===void 0||f.onChange(_)}),(s=this.inputElement)===null||s===void 0||s.addEventListener("click",function(d){var f=d.target.value;f?t.handleQuerySuggestion(f):t.options.history.enabled&&(t.latestKeyword="",t.handleSuggestionDom(J.getHistory(t.options.history),"history"))}),o==null||o.addEventListener("click",function(){var d;t.handleSubmit(((d=t.inputElement)===null||d===void 0?void 0:d.value)||"")}),Se(this.suggestionElement,function(){t.hideSuggestion()}),this.suggestionElement.addEventListener("click",function(d){if(d.target.closest(".suggestion")){var f=d.target.closest(".suggestion"),_=(f==null?void 0:f.dataset.name)||"";t.inputElement.value=_,t.suggestions=[],t.selectCompany={id:(f==null?void 0:f.dataset.id)||"",name:_},t.handleSelect(),t.hideSuggestion(),t.inputWrapElement.classList.add(t.inputWrapHaveWordsClassName)}d.target.id==="remove-history-link"&&(J.removeHistory(t.options.history),t.clearSuggestion(),t.hideSuggestion())}),this.inputClearElement=this.inputWrapElement.querySelector(".company-autocomplete__clear-icon"),this.inputClearElement&&((a=this.inputClearElement)===null||a===void 0||a.addEventListener("click",function(){t.handleClear()})),this.options.autoFocus&&((c=this.inputElement)===null||c===void 0||c.focus()),this.inputElement.addEventListener("focus",function(){Lt(t.options.onFocus)&&t.options.onFocus()}),this.inputElement.addEventListener("blur",function(){t.handleCancelQuerySuggestion(),Lt(t.options.onBlur)&&t.options.onBlur()})}},e.prototype.handleCancelQuerySuggestion=function(){this.abortController&&(this.abortController.abort("repeated request"),this.abortController=void 0)},e.prototype.handleQuerySuggestion=function(t){var n=this;if(this.handleCancelQuerySuggestion(),t===this.latestKeyword){this.handleSuggestionDom(this.suggestions);return}this.abortController=new AbortController,J.handleQueryData(t.trim(),this.options.api,this.abortController).then(function(i){var r=i.data;n.latestKeyword=t.trim(),n.handleSuggestionDom(r),n.options.onFetch()}).catch(function(i){i.name==="AbortError"&&n.options.onAbortFetch(i)})},e.prototype.handleSuggestionDom=function(t,n){var i=this,r,s;if(n===void 0&&(n="fetch"),this.suggestions=t,t.length===0){this.clearSuggestion(),this.hideSuggestion();return}var a=['<div class="suggestion-popper__body">'];t.forEach(function(c){var u,o=Bt(c.name);a.push('<div class="suggestion" data-id="'.concat(c.id,'" data-name="').concat(o,'">')),c.avatar?a.push('<div class="suggestion__avatar"><img data-id="'.concat(c.id||"",'" alt="').concat(o,'" src="').concat(c.avatar||"",'"/></div>')):n==="history"&&a.push('<div class="suggestion__avatar"><i class="suggestion__avatar-icon">'.concat((u=i.options.history)===null||u===void 0?void 0:u.itemIcon,"</i></div>")),a.push('<div class="suggestion__label">'.concat(c.name,"</div>")),a.push('<div class="suggestion__extra"></div>'),a.push("</div>")}),a.push("</div>"),a.push('<div class="suggestion-popper__footer">'),n==="history"&&(!((r=this.options.history)===null||r===void 0)&&r.showClear)&&t.length>0&&a.push('<a id="remove-history-link" href="javascript:;"><i class="suggestion-popper__icon">'.concat(((s=this.options.history)===null||s===void 0?void 0:s.clearIcon)||"","</i>删除历史</a>")),a.push("</div>"),this.suggestionElement.innerHTML=a.join(""),this.suggestionElement.querySelectorAll("img").forEach(function(c){c.getAttribute("src")||J.handleAvatar(c,i.options)}),this.showSuggestion()},e.prototype.handleSelect=function(){this.options.history.enabled&&this.selectCompany&&J.addHistory(this.selectCompany,this.options.history),this.options.onSelect(this.selectCompany)},e.prototype.handleSubmit=function(t){this.options.onSubmit({company:this.selectCompany,text:t})},e.prototype.showSuggestion=function(){this.inputWrapElement.classList.add(this.inputWrapActivatedClassName),this.suggestionElement.classList.add(this.suggestionActivatedClassName),this.keyDownHandler&&this.inputWrapElement.removeEventListener("keydown",this.keyDownHandler),this.keyDownHandler=this.handleKeyDown.bind(this),this.inputWrapElement.addEventListener("keydown",this.keyDownHandler),this.options.onDropdownVisibleChange(!0)},e.prototype.hideSuggestion=function(){this.inputWrapElement.classList.remove(this.inputWrapActivatedClassName),this.suggestionElement.classList.remove(this.suggestionActivatedClassName),this.inputWrapElement.removeEventListener("keydown",this.keyDownHandler),this.options.onDropdownVisibleChange(!1)},e.prototype.clearSuggestion=function(){this.suggestionElement.textContent="",this.suggestions=[]},e.prototype.handleKeyDown=function(t){var n;switch(t.key){case"Enter":this.handleSubmit((n=t.target)===null||n===void 0?void 0:n.value);break;case"ArrowUp":this.keyboardActiveIndex?this.keyboardActiveIndex--:this.keyboardActiveIndex=this.suggestions.length-1,this.selectCompany=this.suggestions[this.keyboardActiveIndex],Ot(Array.from(this.suggestionElement.querySelectorAll(".suggestion")),this.keyboardActiveIndex,"suggestion--keyboard-active"),this.handleBackFill();break;case"ArrowDown":this.keyboardActiveIndex===void 0||this.keyboardActiveIndex>=this.suggestions.length-1?this.keyboardActiveIndex=0:this.keyboardActiveIndex++,this.selectCompany=this.suggestions[this.keyboardActiveIndex],Ot(Array.from(this.suggestionElement.querySelectorAll(".suggestion")),this.keyboardActiveIndex,"suggestion--keyboard-active"),this.handleBackFill();break;case"Escape":this.handleClear();break}},e.prototype.handleBackFill=function(){var t;this.options.backFill&&(this.inputElement.value=Bt(((t=this.selectCompany)===null||t===void 0?void 0:t.name)||""))},e.prototype.handleClear=function(){this.selectCompany=void 0,this.inputElement.value="",this.clearSuggestion(),this.inputWrapElement.classList.remove(this.inputWrapHaveWordsClassName),this.options.onClear()},e}();export{un as A};
